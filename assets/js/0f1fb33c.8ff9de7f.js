"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[679],{49613:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return g}});var o=n(59496);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=o.createContext({}),l=function(e){var t=o.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},p=function(e){var t=l(e.components);return o.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,c=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=l(n),g=r,m=u["".concat(c,".").concat(g)]||u[g]||d[g]||i;return n?o.createElement(m,a(a({ref:t},p),{},{components:n})):o.createElement(m,a({ref:t},p))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,a=new Array(i);a[0]=u;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:r,a[1]=s;for(var l=2;l<i;l++)a[l]=n[l];return o.createElement.apply(null,a)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},22274:function(e,t,n){n.d(t,{ZP:function(){return c}});var o=n(665),r=n(40151),i=(n(59496),n(49613)),a=["components"],s={toc:[]};function c(e){var t=e.components,n=(0,r.Z)(e,a);return(0,i.kt)("wrapper",(0,o.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",null,'This tutorial assumes you have created an Application of type "',n.type,'" in Admin Console. If you are not ready,'," ",(0,i.kt)("a",{href:"../../tutorials/get-started/create-and-integrate-the-first-app"},"read this")," before continuing.")))}c.isMDXComponent=!0},31658:function(e,t,n){n.d(t,{ZP:function(){return c}});var o=n(665),r=n(40151),i=(n(59496),n(49613)),a=["components"],s={toc:[]};function c(e){var t=e.components,n=(0,r.Z)(e,a);return(0,i.kt)("wrapper",(0,o.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Let's switch to the Application details page of Admin Console in this section. Add a Redirect URI ",(0,i.kt)("code",null,n.redirectUri),' and click "Save Changes".'),(0,i.kt)("img",{alt:"Redirect URI in Admin Console",src:n.figureSrc,width:"50%"}),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://www.oauth.com/oauth2-servers/redirect-uris/"},"Redirect URI")," is an OAuth 2.0 concept which implies the location should redirect after authentication."))}c.isMDXComponent=!0},77103:function(e,t,n){n.d(t,{ZP:function(){return c}});var o=n(665),r=n(40151),i=(n(59496),n(49613)),a=["components"],s={toc:[]};function c(e){var t=e.components,n=(0,r.Z)(e,a);return(0,i.kt)("wrapper",(0,o.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/recipes/customize-sie/"},"Customize sign-in experience")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/tutorials/get-started/enable-passcode-sign-in"},"Enable SMS or email passcode sign-in")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/tutorials/get-started/enable-social-sign-in"},"Enable social sign-in")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/recipes/protect-your-api/"},"Protect your API"))))}c.isMDXComponent=!0},51599:function(e,t,n){n.d(t,{ZP:function(){return c}});var o=n(665),r=n(40151),i=(n(59496),n(49613)),a=["components"],s={toc:[]};function c(e){var t=e.components,n=(0,r.Z)(e,a);return(0,i.kt)("wrapper",(0,o.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",null,"Before calling ",(0,i.kt)("code",null,n.calling),", make sure you have correctly configured Redirect URI in Admin Console.")))}c.isMDXComponent=!0},2692:function(e,t,n){n.r(t),n.d(t,{assets:function(){return f},contentTitle:function(){return g},default:function(){return y},frontMatter:function(){return u},metadata:function(){return m},toc:function(){return h}});var o=n(665),r=n(40151),i=(n(59496),n(49613)),a=n.p+"assets/images/ios-redirect-uri-db2447f0a38c684bc2640b090a47f6dd.png",s=n(22274),c=n(31658),l=n(77103),p=n(51599),d=["components"],u={sidebar_label:"iOS"},g="iOS: Integrate Logto Swift SDK",m={unversionedId:"docs/recipes/integrate-logto/ios",id:"docs/recipes/integrate-logto/ios",title:"iOS: Integrate Logto Swift SDK",description:"Add Logto SDK as a dependency",source:"@site/docs/docs/recipes/integrate-logto/ios.mdx",sourceDirName:"docs/recipes/integrate-logto",slug:"/docs/recipes/integrate-logto/ios",permalink:"/docs/recipes/integrate-logto/ios",draft:!1,editUrl:"https://github.com/logto-io/docs/tree/master/docs/docs/recipes/integrate-logto/ios.mdx",tags:[],version:"current",frontMatter:{sidebar_label:"iOS"},sidebar:"docsSidebar",previous:{title:"Android",permalink:"/docs/recipes/integrate-logto/android"},next:{title:"React",permalink:"/docs/recipes/integrate-logto/react"}},f={},h=[{value:"Add Logto SDK as a dependency",id:"add-logto-sdk-as-a-dependency",level:2},{value:"Init <code>LogtoClient</code>",id:"init-logtoclient",level:2},{value:"Sign in",id:"sign-in",level:2},{value:"Configure Redirect URI",id:"configure-redirect-uri",level:3},{value:"Sign in with browser",id:"sign-in-with-browser",level:3},{value:"Sign out",id:"sign-out",level:2},{value:"Further readings",id:"further-readings",level:2}],k={toc:h};function y(e){var t=e.components,n=(0,r.Z)(e,d);return(0,i.kt)("wrapper",(0,o.Z)({},k,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"ios-integrate-logto-swift-sdk"},"iOS: Integrate Logto Swift SDK"),(0,i.kt)(s.ZP,{type:"Native App",mdxType:"AppNote"}),(0,i.kt)("h2",{id:"add-logto-sdk-as-a-dependency"},"Add Logto SDK as a dependency"),(0,i.kt)("p",null,"Use the following URL to add Logto SDK as a dependency in Swift Package Manager."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"https://github.com/logto-io/swift.git\n")),(0,i.kt)("p",null,"Since Xcode 11, you can ",(0,i.kt)("a",{parentName:"p",href:"https://developer.apple.com/documentation/swift_packages/adding_package_dependencies_to_your_app"},"directly import a Swift package")," w/o any additional tool."),(0,i.kt)("p",null,"We do not support ",(0,i.kt)("strong",{parentName:"p"},"Carthage")," and ",(0,i.kt)("strong",{parentName:"p"},"CocoaPods")," at the time due to some technical issues."),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Carthage"),(0,i.kt)("p",null,"Carthage ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/Carthage/Carthage/issues/1226#issuecomment-290931385"},"needs a ",(0,i.kt)("inlineCode",{parentName:"a"},"xcodeproj")," file to build"),", but ",(0,i.kt)("inlineCode",{parentName:"p"},"swift package generate-xcodeproj")," will report a failure since we are using binary targets\nfor native social plugins. We will try to find a workaround later.")),(0,i.kt)("details",null,(0,i.kt)("summary",null,"CocoaPods"),(0,i.kt)("p",null,"CocoaPods ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/CocoaPods/CocoaPods/issues/3276"},"does not support local dependency")," and monorepo, thus it","'","s hard to create a ",(0,i.kt)("inlineCode",{parentName:"p"},".podspec")," for this repo.")),(0,i.kt)("h2",{id:"init-logtoclient"},"Init ",(0,i.kt)("inlineCode",{parentName:"h2"},"LogtoClient")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-swift"},'import Logto\nimport LogtoClient\n\nlet config = try? LogtoConfig(\n  endpoint: "<your-logto-endpoint>", // E.g. http://localhost:3001\n  appId: "<your-app-id>"\n)\nlet client = LogtoClient(useConfig: config)\n')),(0,i.kt)("p",null,"By default, we store credentials like ID Token and Refresh Token in the Keychain. Thus the user doesn't need to sign in again when he returns."),(0,i.kt)("p",null,"To turn off this behavior, set ",(0,i.kt)("inlineCode",{parentName:"p"},"usingPersistStorage")," to ",(0,i.kt)("inlineCode",{parentName:"p"},"false"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-swift"},"let config = try? LogtoConfig(\n  // ...\n  usingPersistStorage: false\n)\n")),(0,i.kt)("h2",{id:"sign-in"},"Sign in"),(0,i.kt)("h3",{id:"configure-redirect-uri"},"Configure Redirect URI"),(0,i.kt)(c.ZP,{figureSrc:a,redirectUri:"io.logto://callback",mdxType:"ConfigureRedirectUri"}),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"The Redirect URI in iOS SDK is only for internal use. There's ",(0,i.kt)("em",{parentName:"p"},"NO NEED")," to add a ",(0,i.kt)("a",{parentName:"p",href:"https://developer.apple.com/documentation/xcode/defining-a-custom-url-scheme-for-your-app"},"Custom URL Scheme")," until a connector asks.")),(0,i.kt)("h3",{id:"sign-in-with-browser"},"Sign in with browser"),(0,i.kt)(p.ZP,{calling:".signInWithBrowser(redirectUri:)",mdxType:"SignInNote"}),(0,i.kt)("p",null,"Go back to Xcode, use the following code to implement sign-in:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-swift"},'do {\n  try await client.signInWithBrowser(redirectUri: "io.logto://callback")\n  print(client.isAuthenticated) // true\n} catch let error as LogtoClientErrors.SignIn {\n  // error occured during sign in\n}\n')),(0,i.kt)("h2",{id:"sign-out"},"Sign out"),(0,i.kt)("p",null,"Calling ",(0,i.kt)("inlineCode",{parentName:"p"},".signOut()")," will clean all the Logto data in Keychain, if it has."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-swift"},"await client.signOut()\n")),(0,i.kt)("h2",{id:"further-readings"},"Further readings"),(0,i.kt)(l.ZP,{mdxType:"FurtherReadings"}))}y.isMDXComponent=!0}}]);